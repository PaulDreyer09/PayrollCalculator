{
  "type_name": "CommandList",
  "params": {
    "list_name": "South African Tax Calculation",
    "children": [
      {
        "type_name": "CommandList",
        "params": {
          "list_name": "Define Input Commands",
          "children": [
            {
              "type_name": "DefineInputCommand",
              "params": {
                "reference": "employee_age",
                "text": "Age",
                "data_type": "number",
                "validation_type": "value",
                "properties": {
                  "min": 0
                }
              }
            },
            {
              "type_name": "DefineInputCommand",
              "params": {
                "reference": "gross_salary",
                "text": "Salary",
                "data_type": "number",
                "validation_type": "value",
                "properties": {
                  "min": 0
                }
              }
            },
            {
              "type_name": "DefineInputCommand",
              "params": {
                "reference": "periods_per_annum",
                "text": "Periods",
                "data_type": "number",
                "validation_type": "list",
                "properties": {
                  "options": [
                    {
                      "text": "Weekly",
                      "value": 52
                    },
                    {
                      "text": "Every 2 Weeks",
                      "value": 26
                    },
                    {
                      "text": "Monthly",
                      "value": 12
                    },
                    {
                      "text": "Yearly",
                      "value": 1
                    }
                  ]
                }
              }
            }
          ]
        }
      },
      {
        "type_name": "CommandList",
        "params": {
          "list_name": "Set Constant Commands",
          "children": [
            {
              "type_name": "SetValueCommand",
              "params": {
                "input_reference": "months_per_year",
                "input_value": 12
              }
            },
            {
              "type_name": "SetValueCollectionCommand",
              "params": {
                "reference_prefix": "uif",
                "json_file_path": "../src/json/inputData/southAfrica/uif_options.json",
                "json_data_reference": "uif_options"
              }
            },
            {
              "type_name": "SetTableCommand",
              "params": {
                "input_reference": "tax_rebates_brackets",
                "json_file_path": "../src/json/inputData/southAfrica/tax_rebates_brackets.json",
                "json_data_reference": "tax_rebates_brackets"
              }
            },
            {
              "type_name": "SetTableCommand",
              "params": {
                "input_reference": "tax_brackets",
                "json_file_path": "../src/json/inputData/southAfrica/tax_brackets.json",
                "json_data_reference": "tax_brackets"
                
              }
            }
          ]
        }
      },
      {
        "type_name": "CommandList",
        "params": {
          "list_name": "Calculation Commands",
          "children": [
            {
              "type_name": "AnnualizeCommand",
              "params": {
                "result_reference": "annual_income",
                "input_value_reference": "gross_salary",
                "periods_per_annum_reference": "periods_per_annum"
              }
            },
            {
              "type_name": "DeAnnualizeCommand",
              "params": {
                "result_reference": "monthly_income",
                "input_value_reference": "annual_income",
                "new_periods_per_annum_reference": "months_per_year"
              }
            },
            {
              "type_name": "CalculateLimitedPercentageCommand",
              "params": {
                "result_reference": "monthly_uif",
                "input_value_reference": "monthly_income",
                "rate_reference": "uif_rate",
                "ceiling_reference": "uif_ceiling"
              }
            },
            {
              "type_name": "AnnualizeCommand",
              "params": {
                "result_reference": "annual_uif",
                "input_value_reference": "monthly_uif",
                "periods_per_annum_reference": "months_per_year"
              }
            },
            {
              "type_name": "DeAnnualizeCommand",
              "params": {
                "result_reference": "de_annualized_uif",
                "input_value_reference": "annual_uif",
                "new_periods_per_annum_reference": "periods_per_annum"
              }
            },
            {
              "type_name": "CalculateAddedTotalByTiersCommand",
              "params": {
                "results_reference": "annual_tax_rebates",
                "table_reference": "tax_rebates_brackets",
                "input_value_reference": "employee_age"
              }
            },
            {
              "type_name": "CalculateTaxByTiersCommand",
              "params": {
                "results_reference": "annual_gross_paye",
                "table_reference": "tax_brackets",
                "input_value_reference": "annual_income"
              }
            },
            {
              "type_name": "FlooredDifferenceCommand",
              "params": {
                "result_reference": "annual_net_paye",
                "input_references": [
                  "annual_gross_paye",
                  "annual_tax_rebates"
                ]
              }
            },
            {
              "type_name": "DeAnnualizeCommand",
              "params": {
                "result_reference": "de_annualized_net_paye",
                "input_value_reference": "annual_net_paye",
                "new_periods_per_annum_reference": "periods_per_annum"
              }
            },
            {
              "type_name": "SubtractCommand",
              "params": {
                "result_reference": "net_salary",
                "input_references": [
                  "gross_salary",
                  "de_annualized_uif",
                  "de_annualized_net_paye"
                ]
              }
            }
          ]
        }
      },
      {
        "type_name": "CommandList",
        "params": {
          "list_name": "Output Definitions",
          "children": [
            {
              "type_name": "DefineOutputCommand",
              "params": {
                "reference": "de_annualized_net_paye",
                "text": "PAYE",
                "data_type": "number",
                "validation_type": "value"
              }
            },
            {
              "type_name": "DefineOutputCommand",
              "params": {
                "reference": "de_annualized_uif",
                "text": "UIF",
                "data_type": "number",
                "validation_type": "value"
              }
            },
            {
              "type_name": "DefineOutputCommand",
              "params": {
                "reference": "net_salary",
                "text": "Net Salary",
                "data_type": "number",
                "validation_type": "value"
              }
            }
          ]
        }
      }
    ]
  }
}
